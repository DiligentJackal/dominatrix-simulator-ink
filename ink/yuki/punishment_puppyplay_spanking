VAR yuki_spanking_target_count = 5
VAR yuki_kneel_spanking_count = 0
VAR yuki_spanking_break_count = 0
VAR yuki_spanking_mistakes = 0
VAR yuki_spanking_count = 0 
VAR yuki_spanking_fails = 0

=== yuki_punishment_puppyplay_spanking ===

//this scene has the player crawl over to the couch and lay across it with their butt out. They get a spanking similiar to the Headmistress scene

{shuffle:
- ~ yuki_spanking_target_count = 5
- ~ yuki_spanking_target_count = 10
}

~ setScene(punishment_scene, Yuki)
~ yuki_spanking_count = 0
~ yuki_spanking_fails = 0
~ yuki_spanking_mistakes = 0

 -> select_gender_check ->
 
/scene atrium.punishment_spanking
/music yuki
/ambient off
/character yuki idle


//intro contains performances

- (intro_puppy_spanking)
My naughty puppy is going to be spanked! #01

TODO: create new pose 'point_to_left'
/perform point_to_left

~ tries = 0
- (spanking_couch)
~ tries++

Crawl over to that couch and lay across it. #02

{cycle:
    - Butt sticking out nice and high. #03
    - And stick out your butt! #04
    - Present your puppy bottom. #05
    }

/perform idle_yuki  

+ [move]
    Get comfortable. You're going to be there for a while. #06
+ { tries < 2 } [timeout] -> Yuki_Interested -> spanking_couch
+ { tries>= 2 } [timeout]
    -> Yuki_CheckIfInterested -> spanking_couch
+ [distracted] -> Yuki_PayAttention -> spanking_couch

//TODO: insert spanking scene
- You have been a naughty puppy. #07
You've obviously forgotten the rules. #08
<i>Disobey and be punished.</i> #09
<i>Obey and be rewarded!</i> #10

- (remember)
Don't you remember those rules, puppy? #11
+ [yes] -
    Don't you lie to me, puppy. #12
    Good {isBoy: boys|{isGirl:girls|pets}} don't earn punishments. #13

+ [no]
    Obviously you don't. #14
    Or you wouldn't be here right now. #15
    
+ [timeout] -> Yuki_Timeout -> remember
+ [distracted] -> Yuki_PayAttention -> remember

// 5, 10
- {
- yuki_spanking_target_count == 5:
    You're going to get five, big swats, puppy! #16
- yuki_spanking_target_count == 10:
    You're going to get ten, big swats, puppy! #40
- else:
    /log bad swat count found
}

I want to hear you count them out. #17

/perform idle
This is going to hurt me more than it hurts you! #18
And don't forget to show me your reaction. #19

- (spank)
/character yuki do_spank_puppy
TODO: create new 'spank_puppy' anim

+ [react-success]
    ~ yuki_spanking_count++

    
    {yuki_spanking_count %2 == 0: 
    -> Yuki_Puppyplay_GoodSpank ->
    }
    
    {yuki_spanking_count < yuki_spanking_target_count: -> spank}
    
    -> spank_success
    
+ [react-fail] 
    ~yuki_spanking_count = 0
    ~yuki_spanking_fails++
    {yuki_spanking_fails > 2: -> spank_failout}
    
    {shuffle:
    - Now you have to start over! #20
    - Are you even trying? Start back at 1. #21
    - I thought the Headmistress trained you to take a spanking?  #22
    Time to start again. #23
    }
    
    Listen puppy. You have to perform every spanking perfectly to finish your punishment. #24
    -- (spank_ready)
    Ready? #25
    
    ++ [yes]
    -> spank
    
    ++ [no]
    -> Yuki_CheckIfInterested -> spank_ready


= spank_failout

/perform react_disappointed
-> Yuki_Badjob ->

Leave and don't come back until you're sorry! #26

-> exit

= spank_success

- /perform idle_pleased
All done! Are you proud of yourself, puppy?  #27

    +[yes]
    /perform idle_tease
   -> Yuki_GoodJob ->
    
    +[no]
    /perform idle_tease
    Well, you should be! #28
    
- (sit)

/perform idle_yuki

{cycle:
    - Now, come here.  #29
    - Come here, puppy. #30
    - I <i>said</i> come here!  #31
}

+ [pose: puppy_sit]
    -> Yuki_GoodJob ->
+ [timeout] -> Yuki_Interested -> sit
+ [distracted] -> Yuki_PayAttention -> sit

~ tries = 0
- (sorry)
~ tries++

/perform idle_unhappy    

{cycle: 
    - Bow your head, puppy, and show me you're sorry. #196
    - Show me you're sorry, puppy.  #32
    - I want to see you show me you're sorry! #33
    }

+ [pose:puppy_sorry]
+ { tries < 2 } [timeout] -> Yuki_Interested -> sorry
+ { tries >= 2} [timeout] -> Yuki_CheckIfInterested -> sorry


- (sorry_ask_again)
/perform idle_unhappy
Are you sorry for breaking the rules, puppy? #34

+ [yes]
    /perform do_shake_finger_stern
    If you feel bad about it, you should have paid better attention! #198
//ending contains performances
    -> Yuki_Puppyplay_Punishment_Complete ->
    Now go. #35

+ [no]
    /perform react_disappointed  
    You're not sorry? #36
    I think somebody <i>wants</i> to be a bad dog. #199
    If you're not sorry, then you haven't paid off your punishment. #37
    You'll have to try next time if you want it removed. #38
    Now, get out of here! #39
//punishment marker will not be removed

+ [timeout] -> Yuki_Timeout -> sorry_ask_again
+ [distracted] -> Yuki_PayAttention -> sorry_ask_again

- 
-> exit
